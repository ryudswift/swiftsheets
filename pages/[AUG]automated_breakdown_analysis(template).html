<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SudoDev Idea | {{title}}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base and Theme Styles */
        body { font-family: 'Inter', sans-serif; background-color: #1a1a1a; color: #f0f0f0; }
        .highlight { color: #d2b48c; font-weight: 600; }
        .icon { font-size: 1.5rem; margin-right: 0.75rem; color: #d2b48c; }

        /* Particles.js Background Canvas */
        #particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 0; }
        .content-wrapper { position: relative; z-index: 1; }

        /* Animated Card Styling */
        .animated-card {
            background-color: #2c2c2c; border: 1px solid #444; border-radius: 0.75rem;
            padding: 1.5rem; position: relative; overflow: hidden;
            opacity: 0; transform: translateY(20px); animation: fadeIn 0.8s forwards;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }
        .animated-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.4); border-color: #d2b48c; }
        .animated-card::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(120deg, transparent, rgba(210,180,140,0.1), transparent);
            transition: left 0.8s ease;
        }
        .animated-card:hover::before { left: 100%; }

        /* Staggered Animation Delays for Cards */
        main > .animated-card:nth-of-type(1) { animation-delay: 0.1s; }
        main > .animated-card:nth-of-type(2) { animation-delay: 0.2s; }
        main > .animated-card:nth-of-type(3) { animation-delay: 0.3s; }
        main > .animated-card:nth-of-type(4) { animation-delay: 0.4s; }
        main > .animated-card:nth-of-type(5) { animation-delay: 0.5s; }
        main > .animated-card:nth-of-type(6) { animation-delay: 0.6s; }
        main > .animated-card:nth-of-type(7) { animation-delay: 0.7s; }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        /* Badge and List Styles */
        .status-badge, .theme-badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 600; border: 1px solid; }
        .status-new { background-color: rgba(59, 130, 246, 0.15); color: #93c5fd; border-color: #3b82f6; }
        .status-in-progress { background-color: rgba(251, 191, 36, 0.15); color: #fde68a; border-color: #fbbf24; }
        .status-researched { background-color: rgba(16, 185, 129, 0.15); color: #6ee7b7; border-color: #10b981; }
        .status-archived { background-color: rgba(156, 163, 175, 0.15); color: #d1d5db; border-color: #9ca3af; }
        .theme-badge { background-color: rgba(210,180,140,0.15); color: #d2b48c; border-color: #d2b48c; }

        /* Score Circles */
        .score-container { display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 1rem; margin-top: 1rem; }
        .score-circle { width: 100px; height: 100px; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: bold; position: relative; background-color: #444; }
        .score-circle .score-value { font-size: 1.5rem; }
        .score-circle .score-label { font-size: 0.75rem; margin-top: 4px; }
        .score-circle.priority { background: conic-gradient(#ff6b6b 0% var(--priority-percent, 0%), #444 var(--priority-percent, 0%) 100%); }
        .score-circle.effort { background: conic-gradient(#ffd166 0% var(--effort-percent, 0%), #444 var(--effort-percent, 0%) 100%); }
        .score-circle.rarity { background: conic-gradient(#9b5de5 0% var(--rarity-percent, 0%), #444 var(--rarity-percent, 0%) 100%); }

        /* Checklist and Progress Bar */
        .checklist-item { display: flex; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid #444; cursor: pointer; transition: opacity 0.3s ease; }
        .checklist-item:last-child { border-bottom: none; }
        .checklist-item.completed { opacity: 0.6; }
        .checklist-item.completed .item-text { text-decoration: line-through; }
        .checkbox { width: 1.25rem; height: 1.25rem; margin-right: 1rem; border: 2px solid #d2b48c; border-radius: 0.25rem; display: flex; align-items: center; justify-content: center; transition: background-color 0.3s ease; flex-shrink: 0; }
        .checklist-item.completed .checkbox { background-color: #d2b48c; }
        .checkbox svg { display: none; width: 1rem; height: 1rem; color: #1a1a1a; }
        .checklist-item.completed .checkbox svg { display: block; }
        .progress-container { background-color: #444; border-radius: 9999px; height: 12px; width: 100%; overflow: hidden; margin: 1rem 0 0.5rem; }
        #progress-bar { background-color: #d2b48c; height: 100%; width: 0%; transition: width 0.5s ease-in-out; }
        #progress-text { font-size: 0.875rem; color: #9ca3af; text-align: right; }
    </style>
</head>
<body class="antialiased">

    <div id="particles-js"></div>

    <div class="content-wrapper container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-white">SudoDev Idea Matrix</h1>
            <p class="text-lg text-gray-300 mt-2">Automated Breakdown & Analysis</p>
        </header>

        <main class="space-y-8" id="dashboard-content">
            <section class="animated-card text-center">
                <div class="flex justify-center flex-wrap gap-2 mb-4">
                    <span class="status-badge status-{{status}}">{{status}}</span>
                    {{#each categories}}
                    <span class="theme-badge">{{this}}</span>
                    {{/each}}
                </div>
                <h2 class="text-3xl font-bold mt-4 text-white">{{title}}</h2>
                <p class="text-gray-400 mt-2">Created: {{date_created}}</p>
            </section>

            <section class="animated-card">
                <h2 class="text-2xl font-bold flex items-center"><span class="icon">ðŸ“Š</span> Idea Scores</h2>
                <div class="score-container">
                    <div class="score-circle priority" style="--priority-percent: {{priority_score}}%;">
                        <div class="score-value">{{priority_score}}</div>
                        <div class="score-label">Priority</div>
                    </div>
                    <div class="score-circle effort" style="--effort-percent: {{effort_score}}%;">
                        <div class="score-value">{{effort_score}}</div>
                        <div class="score-label">Effort</div>
                    </div>
                    <div class="score-circle rarity" style="--rarity-percent: {{rarity_score}}%;">
                        <div class="score-value">{{rarity_score}}</div>
                        <div class="score-label">Rarity</div>
                    </div>
                </div>
            </section>

            <section class="animated-card">
                <h2 class="text-2xl font-bold flex items-center"><span class="icon">ðŸ“‹</span> Summary</h2>
                <p class="text-gray-300 leading-relaxed mt-4">{{summary}}</p>
            </section>

            <section class="animated-card">
                <h2 class="text-2xl font-bold flex items-center"><span class="icon">âœ…</span> Execution Checklist</h2>
                <div class="progress-container">
                    <div id="progress-bar"></div>
                </div>
                <p id="progress-text" class="w-full"></p>
                <div id="checklist-container" class="mt-4">
                    {{#each next_actions}}
                    <div class="checklist-item">
                        <div class="checkbox"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg></div>
                        <span class="item-text text-gray-300">{{this}}</span>
                    </div>
                    {{/each}}
                </div>
            </section>

            </main>

        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>&copy; {{new Date().getFullYear()}} SudoDev. All ideas processed and structured for action.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Checklist & Progress Bar Logic ---
            const checklistContainer = document.getElementById('checklist-container');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const checklistItems = checklistContainer.querySelectorAll('.checklist-item');
            const totalItems = checklistItems.length;

            function updateProgress() {
                const completedItems = checklistContainer.querySelectorAll('.checklist-item.completed').length;
                const percentage = totalItems > 0 ? (completedItems / totalItems) * 100 : 0;
                
                progressBar.style.width = percentage + '%';
                progressText.textContent = `${completedItems} / ${totalItems} tasks completed`;
            }

            checklistItems.forEach(item => {
                item.addEventListener('click', function() {
                    this.classList.toggle('completed');
                    updateProgress();
                });
            });

            // Initial calculation on page load
            updateProgress();

            // --- Particles.js Initialization ---
            particlesJS('particles-js', {
                "particles": {
                    "number": { "value": 60, "density": { "enable": true, "value_area": 800 } },
                    "color": { "value": "#d2b48c" },
                    "shape": { "type": "circle" },
                    "opacity": { "value": 0.2, "random": true },
                    "size": { "value": 3, "random": true },
                    "line_linked": { "enable": true, "distance": 150, "color": "#444", "opacity": 0.3, "width": 1 },
                    "move": { "enable": true, "speed": 1, "direction": "none", "out_mode": "out" }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": false } },
                    "modes": { "grab": { "distance": 140, "line_linked": { "opacity": 0.5 } } }
                },
                "retina_detect": true
            });
        });
    </script>
</body>
</html>
